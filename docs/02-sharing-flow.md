# 02. Шаринг: поток приглашений (Sharing Flow)

## Цель MVP
Дать владельцу списка возможность пригласить другого пользователя по email и назначить роль (viewer/editor).
Приглашённый пользователь принимает приглашение и получает доступ к списку.

## Базовый сценарий (Invite by Email)
1) Owner на странице списка вводит:
   - email получателя
   - роль: viewer или editor
2) Backend создаёт запись `list_invites` со статусом `pending` и токеном.
3) Приглашённый пользователь:
   - регистрируется/логинится
   - открывает раздел “Приглашения”
4) Он видит pending-invite и нажимает “Принять”.
5) Backend:
   - создаёт/обновляет `list_members` (list_id + user_id + role)
   - переводит invite в `accepted`
6) Список появляется у пользователя в `/lists` как “shared”.

## Статусы приглашения
- pending — ожидает принятия
- accepted — принято (membership создан)
- revoked — отозвано владельцем
- expired — истёк срок (например, 7 дней)

## Правила и ограничения
- Invite привязан к (list_id + email).
- Повторное приглашение на тот же email:
  - если есть pending — вернуть существующий или обновить роль/expiration (решение: обновлять).
- Если пользователь с email уже состоит в members:
  - создавать invite нельзя (409 Conflict).
- Только Owner может создавать/отзывать invites и управлять members.

## UX-решения (минимум)
- Owner видит список участников и их роли.
- Owner видит список приглашений по списку (pending/revoked/expired/accepted).
- Invitee видит “Мои приглашения” (pending).
- При принятии: показать уведомление + редирект на список.
